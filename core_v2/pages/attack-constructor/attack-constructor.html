<!-- Attack Constructor Page Content –¥–ª—è SPA -->
<div class="signature-constructor-page">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <header class="page-header">
        <div class="header-content">
            <div class="header-main">
                <h1 class="page-title">
                    <span class="title-icon">‚öîÔ∏è</span>
                    –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–æ–¥—É–ª–µ–π –∞—Ç–∞–∫
                </h1>
                <p class="page-subtitle">
                    –°–æ–∑–¥–∞–≤–∞–π—Ç–µ, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–µ–Ω—Ç–µ—Å—Ç–∞ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º
                    –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∞—Ç–∞–∫
                </p>
            </div>
            <div class="header-actions">
                <button id="btn-save-rule" class="btn btn-primary" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
                <button id="btn-load-template" class="btn btn-secondary" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–ª–µ–π–±—É–∫">
                    üìÇ –ü–ª–µ–π–±—É–∫
                </button>
            </div>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π layout -->
    <main class="signature-constructor-layout">

        <!-- –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞: –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ + –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="constructor-top-row">

            <!-- –õ–µ–≤–∞—è —Å–µ–∫—Ü–∏—è: –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–æ–¥—É–ª–µ–π –∞—Ç–∞–∫ -->
            <section class="components-library-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-icon">üéØ</span>
                        –ú–æ–¥—É–ª–∏ –∞—Ç–∞–∫
                    </h2>
                </div>

                <div class="section-content components-library">
                    <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è -->
                    <div class="library-controls">
                        <input type="text" id="component-search" class="form-control form-control--sm"
                            placeholder="–ü–æ–∏—Å–∫ –º–æ–¥—É–ª–µ–π –∞—Ç–∞–∫..." autocomplete="off">
                        <select id="component-category" class="form-control form-control--sm">
                            <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="discovery">–†–∞–∑–≤–µ–¥–∫–∞</option>
                            <option value="enum">–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ</option>
                            <option value="brute">Bruteforce</option>
                            <option value="exploit">–≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è</option>
                            <option value="lateral">Lateral Movement</option>
                            <option value="post">Post-Exploitation</option>
                            <option value="persistence">–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</option>
                            <option value="exfiltration">–≠–∫—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è</option>
                        </select>
                    </div>

                    <!-- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω —Å –º–æ–¥—É–ª—è–º–∏ -->
                    <div class="components-accordion" id="components-list">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </section>

            <!-- –ü—Ä–∞–≤–∞—è —Å–µ–∫—Ü–∏—è: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ -->
            <section class="properties-testing-section">
                <div class="section-header">
                    <div class="section-tabs">
                        <button id="tab-properties" class="tab-button active">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</button>
                        <button id="tab-testing" class="tab-button">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</button>
                        <button id="tab-output" class="tab-button">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ -->
                <div id="tab-content-properties" class="tab-content active">
                    <div id="selected-component" class="no-selection">
                        <div class="no-selection-icon">‚öôÔ∏è</div>
                        <h4>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª—å –∞—Ç–∞–∫–∏</h4>
                        <p>–©–µ–ª–∫–Ω–∏—Ç–µ –Ω–∞ –º–æ–¥—É–ª—å –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</p>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
                <div id="tab-content-testing" class="tab-content">
                    <div class="test-controls">
                        <div class="form-group">
                            <label for="target-range" class="form-label">–î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–ª–µ–π</label>
                            <input type="text" id="target-range" class="form-control"
                                placeholder="192.168.1.0/24, 10.0.0.1-10.0.0.100" value="192.168.1.0/24">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="safe-mode" checked>
                                Safe Mode (—Ç–æ–ª—å–∫–æ –Ω–µ—Ä–∞–∑—Ä—É—à–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã)
                            </label>
                        </div>

                        <div class="test-actions">
                            <button id="run-validation" class="btn btn-success btn-lg">
                                ‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π
                            </button>
                            <button id="run-simulation" class="btn btn-outline">
                                üß™ Dry Run
                            </button>
                        </div>
                    </div>

                    <div id="test-results" class="test-results">
                        <div class="no-results">
                            <span class="no-results-icon">üìä</span>
                            <p>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è</p>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
                <div id="tab-content-output" class="tab-content">
                    <div class="form-group">
                        <label for="output-format" class="form-label">–§–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞</label>
                        <select id="output-format" class="form-control">
                            <option value="json">JSON</option>
                            <option value="yaml">YAML</option>
                            <option value="python">Python Script</option>
                            <option value="bash">Bash Script</option>
                        </select>
                    </div>

                    <div class="code-preview">
                        <div class="preview-header">
                            <h5>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π</h5>
                            <div class="preview-actions">
                                <button id="btn-copy-rule" class="btn btn-icon">üìã</button>
                            </div>
                        </div>
                        <pre id="rule-output">–°—Ü–µ–Ω–∞—Ä–∏–π –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</pre>
                    </div>
                </div>
            </section>
        </div>

        <!-- –ù–∏–∂–Ω—è—è —Å–µ–∫—Ü–∏—è: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ -->
        <section class="rule-constructor-section">
            <div class="section-header">
                <div class="header-left">
                    <div class="rule-metadata-inline">
                        <input type="text" id="rule-name" class="form-control form-control--inline"
                            placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è –∞—Ç–∞–∫–∏" value="SSH Enumeration & Brute Force">

                        <select id="rule-type" class="form-control form-control--inline">
                            <option value="network">Network Penetration</option>
                            <option value="webapp">Web Application</option>
                            <option value="iot">IoT & Embedded</option>
                            <option value="infrastructure">Infrastructure</option>
                            <option value="wireless">Wireless</option>
                        </select>

                        <select id="rule-priority" class="form-control form-control--inline">
                            <option value="info">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π</option>
                            <option value="low">–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫</option>
                            <option value="medium">–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫</option>
                            <option value="high">–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫</option>
                            <option value="critical">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π</option>
                        </select>
                    </div>
                </div>

                <div class="header-right">
                    <div class="rule-stats">
                        <div class="stat-item">
                            <span class="stat-label">–ú–æ–¥—É–ª–µ–π</span>
                            <span id="components-count" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–°–≤—è–∑–µ–π</span>
                            <span id="connections-count" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–°–ª–æ–∂–Ω–æ—Å—Ç—å</span>
                            <span id="rule-complexity" class="stat-value">‚Äî</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Canvas –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è -->
            <div id="rule-canvas" class="rule-canvas">
                <div id="canvas-empty" class="canvas-empty">
                    <span class="empty-icon">üéØ</span>
                    <h4>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –º–æ–¥—É–ª–∏ –∞—Ç–∞–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è</h4>
                    <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ drag & drop –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–¥—É–ª–µ–π –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞—Ç–∞–∫</p>
                    <div class="empty-tips">
                        <div class="tip-item">
                            <span class="tip-icon">üí°</span>
                            <span>–ù–∞—á–Ω–∏—Ç–µ —Å –º–æ–¥—É–ª–µ–π —Ä–∞–∑–≤–µ–¥–∫–∏ (Discovery)</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">üîó</span>
                            <span>–°–æ–µ–¥–∏–Ω—è–π—Ç–µ –º–æ–¥—É–ª–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">‚öôÔ∏è</span>
                            <span>–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è</span>
                        </div>
                    </div>
                </div>

                <!-- SVG —Å–ª–æ–π –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π -->
                <svg id="connection-layer" class="connection-layer">
                    <!-- –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </svg>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è -->
            <div class="logic-expression-bar">
                <div class="logic-header">
                    <span class="logic-label">–ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</span>
                    <button id="btn-validate-scenario" class="btn btn-outline btn-sm">
                        ‚úì –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                </div>
                <div id="logic-expression" class="logic-expression">
                    <span class="expression-placeholder">–°—Ü–µ–Ω–∞—Ä–∏–π –ø—É—Å—Ç</span>
                </div>
            </div>
        </section>
    </main>

</div>

<script type="module">
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Attack Constructor —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä
    import { initializeAttackConstructor } from './attack-constructor-main.js';

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤ SPA
    (async () => {
        try {
            console.log('üéØ –ó–∞–ø—É—Å–∫ Attack Constructor...');
            const app = await initializeAttackConstructor();
            console.log('‚úÖ Attack Constructor —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω', app.getStatus());
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ Attack Constructor:', error);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            const errorDiv = document.createElement('div');
            errorDiv.className = 'attack-constructor-error';
            errorDiv.innerHTML = `
      <div class="error-content">
        <h4>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∞—Ç–∞–∫</h4>
        <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞.</p>
        <button onclick="location.reload()" class="btn btn-primary">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
      </div>
    `;

            const container = document.querySelector('.signature-constructor-page');
            if (container) {
                container.prepend(errorDiv);
            }
        }
    })();
</script>